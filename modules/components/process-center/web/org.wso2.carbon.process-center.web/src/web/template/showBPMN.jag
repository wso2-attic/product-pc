
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Asset | WSO2 Enterprise Store Publisher</title>

    <link rel="icon" href="/publisher/themes/default/img/favicon.png" type="image/x-icon" />

    <!-- Bootstrap -->
    <link href="/publisher/themes/default/css/bootstrap.min.css" rel="stylesheet" media="screen">

    <!-- fontawesome -->
    <link rel="stylesheet" href="/publisher/themes/default/css/font-awesome.min.css">

    <!-- fontwso2 -->
    <link rel="stylesheet" href="/publisher/themes/default/css/fontwso2.css">
    <link rel="stylesheet" href="/publisher/themes/default/css/fontwso2-extend.css">

    <!-- Token input -->
    <link rel="stylesheet" href="/publisher/themes/default/js/token.input/css/token-input-facebook.css">
    <!-- Helper css injections -->

    <!-- Custom css -->
    <link href="/publisher/themes/default/css/custom.css" rel="stylesheet">
    <link href="/publisher/themes/default/css/custom-theme.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/publisher/themes/default/css/select2.min.css"/><link rel="stylesheet" type="text/css" href="/publisher/extensions/assets/process/themes/default/css/alertify.css"/><link rel="stylesheet" type="text/css" href="/publisher/extensions/assets/process/themes/default/css/default.css"/><link rel="stylesheet" type="text/css" href="/publisher/extensions/assets/process/themes/default/css/jquery-ui.css"/>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/publisher/themes/default/js/html5shiv.min.js"></script>
    <script src="/publisher/themes/default/js/respond.min.js"></script>
    <![endif]-->

</head>

<body>

<div class="wrapper">
    <div class="container-fluid">
        <!-- header -->
<header>
    <div class="row wr-global-header">
        <div class="col-xs-8 col-sm-8 app-logo">
            <a href='/publisher/assets/process/list'>
                <img src="/publisher/themes/default/img/logo.png" />
                <h2 class="app-title">Process Center - Designer</h2>
            </a>
        </div>
        <div class="col-xs-4 col-sm-4 wr-auth-container">
        		<div class="wr-auth pull-right">
                    <a href="/process-center">
                        <div class="auth-img">
                            <h2 class="app-title" style="padding-top:8px"><i style="margin-right:10px;" class="fa fa-bars fa-1g"></i>Process Center</h2>
                        </div>
                    </a>

        			<a href="#" data-toggle="dropdown" class="">
        				<div class="auth-img">
        					<span>admin</span>&nbsp;&nbsp;<i class="fw fw-user fw-lg"></i>
        				</div>
        			</a>
        			<div class="dropdown-menu">
        				<div class="cu-arrow"></div>
        				<div class="dropdown-menu-content">
        					<a class="filter-item" onclick="window.location.href='/publisher/logout'" href="#">Sign out</a>
        				</div>
        			</div>
        		</div>
        </div>
    </div>
</header>
<!-- /header -->

    </div>
    <div class="container-fluid ribbon-container">
        <!-- secondary header - app bar -->

<nav class="navbar navbar-default navbar-themed">
    <div>
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div class="wr-asset-type-switcher">
            <a id="popoverExampleTwo" data-placement="bottom" class="ctrl-asset-type-switcher pull-left" href="javascript:void(0)" data-click-event="popover">
                <span class="btn-asset"></span>
            </a>
            <div class="popover bottom right fade clearfix">
                <div class="arrow left"></div>
                <div class="popover-content">
                    <ul class="tiles clearfix">

                            <li>
                                <a target="_self" href='/publisher/assets/process/list'>
                                    <i class="icon fw fw-resource"></i>
                                    <span class="name">Process</span>
                                </a>
                            </li>

                    </ul>
                </div>
            </div>
            <a class="pull-left switcher-link" href='/publisher/assets/process/list'>Processes</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">

            <div class="wr-action-btn-bar">
                <ul class="nav navbar-nav">

                    <li>
                        <a id="Overview" href='/publisher/assets/process/details/ac3a9217-8a27-415b-9fd8-d3111a38bc63' class="cu-btn btn-overview">
                            Overview
                        </a>
                    </li>

                    <li>
                        <a id="LifeCycle" href='/publisher/assets/process/lifecycle/ac3a9217-8a27-415b-9fd8-d3111a38bc63' class="cu-btn btn-lifecycle">
                            Life Cycle
                        </a>
                    </li>

                    <li>
                        <a id="Delete" href='/publisher/assets/process/delete/ac3a9217-8a27-415b-9fd8-d3111a38bc63' class="cu-btn btn-delete">
                            Delete
                        </a>
                    </li>

                </ul>
            </div>

        </div><!--/.nav-collapse -->
    </div>
</nav>

<div id="modal-redirect" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-body">
        <div class="modal-loading"></div>
        <p>
            Redirecting you to the new Asset Version...
        </p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary">
            Redirect now
        </button>
    </div>
</div>
    </div>
    <div class="container-fluid wr-main-content">
        <script>
    var processNames = [];
    var processListObj;

    window.onload = getProcessList;

    function getMainProcess(){
        var mainProcess = $('#view-header').text() + "-" + $('#process-version').text();
        return mainProcess;
    }

    function showBPMN() {

        $("#overviewDiv").hide();
        $("#processTextContainer").hide();
        $("#processTextEditDiv").hide();
        $("#bpmnViewDiv").show();
        $("#bpmnEditDiv").hide();

        $.ajax({
            url: 'https://localhost:9443/publisher/assets/process/apis/get_bpmn_content?bpmn_content_path=/_system/governance/bpmn/process1/1.0',
            type: 'GET',
            success: function (response) {
                var bpmnObject = JSON.parse(response);
                $("#bpmnImage").attr("src", "data:image/png;base64," + bpmnObject.bpmnImage);
            },
            error: function () {
                alertify.error('BPMN diagram showing error');
            }
        });

    }

    function viewText() {
        loadProcessText();

        $("#overviewDiv").hide();
        $("#processTextContainer").show();
        $("#processTextEditDiv").hide();
        $("#bpmnViewDiv").hide();
        $("#bpmnEditDiv").hide();
    }

    function editText() {
        $("#processContent").val($("#processTextDiv").html());
        showTextEditor();
    }

    function loadProcessText() {
        var ppath = 'apis/get_process_text?process_text_path=processText/process1/1.0';

        $.ajax({
            url: 'https://localhost:9443/publisher/assets/process/apis/get_process_text?process_text_path=/processText/process1/1.0',
            type: 'GET',
            success: function (response) {
                $("#processTextDiv").html(response);
            },
            error: function () {
                alertify.error('Text editor error');
            }
        });
    }

    function saveProcessText(e) {
        var textContent = tinyMCE.get('processContent').getContent();
        if (textContent == "") {
            if($(e).attr('id') == 'processTextSaveBtn'){
                alertify.error('Process content is empty.');
            }
        } else {
            // save the process

            $.ajax({
                url: 'https://localhost:9443/publisher/assets/process/apis/save_process_text',
                type: 'POST',
                data: { 'processName': $("#textProcessName").val(), 'processVersion' : $("#textProcessVersion").val(), 'processText' : textContent},
                success: function (response) {
                    if($(e).attr('id') == 'processTextSaveBtn'){
                        alertify.success("Successfully saved the process content.");
                    }
                    $("#viewTextButton").show();
                    $("#addTextButton").hide();
                },
                error: function () {
                    alertify.error('Process text error');
                }
            });
        }
    }

    function showTextEditor() {
        $("#overviewDiv").hide();
        $("#processTextContainer").hide();
        $("#processTextEditDiv").show();
        $("#bpmnViewDiv").hide();
        $("#bpmnEditDiv").hide();

        tinymce.init({
            selector: "#processContent"
        });
    }

    function showBPMNUploader() {
        $("#overviewDiv").hide();
        $("#processTextContainer").hide();
        $("#processTextEditDiv").hide();
        $("#bpmnViewDiv").hide();
        $("#bpmnEditDiv").show();
    }

    function showOverview(e) {
        if($(e).attr('id') == 'processTextOverviewBtn'){
            saveProcessText(e);
        }
        $("#overviewDiv").show();
        $("#processTextContainer").hide();
        $("#processTextEditDiv").hide();
        $("#bpmnViewDiv").hide();
        $("#bpmnEditDiv").hide();
    }

    function editProcessOwner(e){
        if($(e).text() == ''){
            alertify.error('Process owner field is empty.');
        }else{
            $('#processOwnerUpdateBtn').show();
        }
    }

    function subProcessNamesAutoComplete(){
        $(".subprocess_Name").autocomplete({
            source: processNames
        });
    }

    function successorNameAutoComplete(){
        $(".successor_Name").autocomplete({
            source: processNames
        });
    }

    function predecessorNameAutoComplete(){
        $(".predecessor_Name").autocomplete({
            source: processNames
        });
    }

    function getProcessList(){
        $.ajax({
            url: '/publisher/assets/process/apis/get_process_list',
            type: 'GET',
            success: function (response) {
                processListObj = JSON.parse(response);
                for(var i = 0 ; i < processListObj.length ; i++){
                    processNames.push(processListObj[i].processname + "-" + processListObj[i].processversion);
                }
            },
            error: function () {
                alertify.error('Process list returning error');
            }
        });
    }

    function isProcessNotAvailableInList(processName){
        for(var i = 0 ; i < processNames.length ; i++){
            if(processNames[i] == processName){
                return false;
            }
        }
        return true;
    }

    function readUpdatedSubprocess(currentObj){
        var subprocessInput = $(currentObj).parent().closest("tr").find("input").val();

        if(subprocessInput == ''){
            alertify.error('Subprocess field is empty.');
        }else if(isProcessNotAvailableInList(subprocessInput)){
            alertify.warning('Please select a process from the dropdown list.');
        }else if(subprocessInput == getMainProcess()){
            alertify.warning('You cannot assign the process name as its subprocess.');
        }else{
            $(currentObj).parent().closest("tr").find("input").replaceWith("<span id='subprocess_Name' class='subprocess_Name'>"+subprocessInput+"</span>");
            $(currentObj).hide();
            var subprocessPath, subprocessId;
            for(var i = 0 ; i < processListObj.length ; i++){
                if(processListObj[i].processname == subprocessInput.split("-")[0] &&
                        processListObj[i].processversion == subprocessInput.split("-")[1]){
                    subprocessPath = processListObj[i].path;
                    subprocessId = processListObj[i].processid;
                    break;
                }
            }

            var subprocessInfo = {
                name: subprocessInput.split("-")[0],
                path: subprocessPath,
                id: subprocessId
            };

            var subProcessDetails = {
                'processName': $('#view-header').text(),
                'processVersion' : $('#process-version').text(),
                'subprocess' : subprocessInfo
            };

            $.ajax({
                url: '/publisher/assets/process/apis/update_subprocess',
                type: 'POST',
                data: { 'subprocessDetails': JSON.stringify(subProcessDetails) },
                success: function (response) {
                    alertify.success('Process ' + subprocessInput + ' successfully added to the subprocess list.');
                },
                error: function () {
                    alertify.error('Subprocess updating error');
                }
            });
        }
    }

    function readUpdatedSuccessor(currentObj){
        var successorInput = $(currentObj).parent().closest("tr").find("input").val();

        if(successorInput == ''){
            alertify.error('Successor field is empty.');
        }else if(isProcessNotAvailableInList(successorInput)){
            alertify.warning('Please select a process from the dropdown list.');
        }else if(successorInput == getMainProcess()){
            alertify.warning('You cannot assign the process name as its successor.');
        }else{
            $(currentObj).parent().closest("tr").find("input").replaceWith("<span id='successor_Name' class='successor_Name'>"+successorInput+"</span>");
            $(currentObj).hide();
            var successorPath, successorId;
            for(var i = 0 ; i < processListObj.length ; i++){
                if(processListObj[i].processname == successorInput.split("-")[0] &&
                        processListObj[i].processversion == successorInput.split("-")[1]){
                    successorPath = processListObj[i].path;
                    successorId = processListObj[i].processid;
                    break;
                }
            }

            var successorInfo = {
                name: successorInput.split("-")[0],
                path: successorPath,
                id: successorId
            };

            var successorDetails = {
                'processName': $('#view-header').text(),
                'processVersion' : $('#process-version').text(),
                'successor' : successorInfo
            };

            $.ajax({
                url: '/publisher/assets/process/apis/update_successor',
                type: 'POST',
                data: { 'successorDetails': JSON.stringify(successorDetails) },
                success: function (response) {
                    alertify.success('Process ' + successorInput + ' successfully added to the successor list.');
                },
                error: function () {
                    alertify.error('Successor updating error');
                }
            });
        }
    }

    function readUpdatedPredecessor(currentObj){
        var predecessorInput = $(currentObj).parent().closest("tr").find("input").val();

        if(predecessorInput == ''){
            alertify.error('Predecessor field is empty.');
        }else if(isProcessNotAvailableInList(predecessorInput)){
            alertify.warning('Please select a process from the dropdown list.');
        }else if(predecessorInput == getMainProcess()){
            alertify.warning('You cannot assign the process name as its predecessor.');
        }else{
            $(currentObj).parent().closest("tr").find("input").replaceWith("<span id='predecessor_Name' class='predecessor_Name'>"+predecessorInput+"</span>");
            $(currentObj).hide();
            var predecessorPath, predecessorId;
            for(var i = 0 ; i < processListObj.length ; i++){
                if(processListObj[i].processname == predecessorInput.split("-")[0] &&
                        processListObj[i].processversion == predecessorInput.split("-")[1]){
                    predecessorPath = processListObj[i].path;
                    predecessorId = processListObj[i].processid;
                    break;
                }
            }

            var predecessorInfo = {
                name: predecessorInput.split("-")[0],
                path: predecessorPath,
                id: predecessorId
            };

            var predecessorDetails = {
                'processName': $('#view-header').text(),
                'processVersion' : $('#process-version').text(),
                'predecessor' : predecessorInfo
            };

            $.ajax({
                url: '/publisher/assets/process/apis/update_predecessor',
                type: 'POST',
                data: { 'predecessorDetails': JSON.stringify(predecessorDetails) },
                success: function (response) {
                    alertify.success('Process ' + predecessorInput + ' successfully added to the predecessor list.');
                },
                error: function () {
                    alertify.error('Predecessor updating error');
                }
            });
        }
    }

    function deleteSubprocess(element){
        var deleteSubInput = $(element).parent().closest("tr").find("span").text();
        if(! isProcessNotAvailableInList(deleteSubInput)){
            var deleteSubPath, deleteSubId;
            for(var i = 0 ; i < processListObj.length ; i++){
                if(processListObj[i].processname == deleteSubInput.split("-")[0] &&
                        processListObj[i].processversion == deleteSubInput.split("-")[1]){
                    deleteSubPath = processListObj[i].path;
                    deleteSubId = processListObj[i].processid;
                    break;
                }
            }

            var deleteSubInfo = {
                name: deleteSubInput.split("-")[0],
                path: deleteSubPath,
                id: deleteSubId
            };

            var deleteSubObj = {
                'processName': $('#view-header').text(),
                'processVersion' : $('#process-version').text(),
                'deleteSubprocess' : deleteSubInfo
            };

            $.ajax({
                url: '/publisher/assets/process/apis/delete_subprocess',
                type: 'POST',
                data: { 'deleteSubprocessDetails': JSON.stringify(deleteSubObj) },
                success: function (response) {
                    alertify.success('Successfully deleted ' + deleteSubInput + ' from the subprocess list.');
                },
                error: function () {
                    alertify.error('Subprocess deleting error');
                }
            });
        }
    }

    function deleteSuccessor(element){
        var deleteSuccessorInput = $(element).parent().closest("tr").find("span").text();
        if(! isProcessNotAvailableInList(deleteSuccessorInput)){
            var deleteSuccessorPath, deleteSuccessorId;
            for(var i = 0 ; i < processListObj.length ; i++){
                if(processListObj[i].processname == deleteSuccessorInput.split("-")[0] &&
                        processListObj[i].processversion == deleteSuccessorInput.split("-")[1]){
                    deleteSuccessorPath = processListObj[i].path;
                    deleteSuccessorId = processListObj[i].processid;
                    break;
                }
            }

            var deleteSuccessorInfo = {
                name: deleteSuccessorInput.split("-")[0],
                path: deleteSuccessorPath,
                id: deleteSuccessorId
            };

            var deleteSuccessorObj = {
                'processName': $('#view-header').text(),
                'processVersion' : $('#process-version').text(),
                'deleteSuccessor' : deleteSuccessorInfo
            };

            $.ajax({
                url: '/publisher/assets/process/apis/delete_successor',
                type: 'POST',
                data: { 'deleteSuccessorDetails': JSON.stringify(deleteSuccessorObj) },
                success: function (response) {
                    alertify.success('Successfully deleted ' + deleteSuccessorInput + ' from the successor list.');
                },
                error: function () {
                    alertify.error('Successor deleting error');
                }
            });
        }
    }

    function deletePredecessor(element){
        var deletePredecessorInput = $(element).parent().closest("tr").find("span").text();
        if(! isProcessNotAvailableInList(deletePredecessorInput)){
            var deletePredecessorPath, deletePredecessorId;
            for(var i = 0 ; i < processListObj.length ; i++){
                if(processListObj[i].processname == deletePredecessorInput.split("-")[0] &&
                        processListObj[i].processversion == deletePredecessorInput.split("-")[1]){
                    deletePredecessorPath = processListObj[i].path;
                    deletePredecessorId = processListObj[i].processid;
                    break;
                }
            }

            var deletePredecessorInfo = {
                name: deletePredecessorInput.split("-")[0],
                path: deletePredecessorPath,
                id: deletePredecessorId
            };

            var deletePredecessorObj = {
                'processName': $('#view-header').text(),
                'processVersion' : $('#process-version').text(),
                'deletePredecessor' : deletePredecessorInfo
            };

            $.ajax({
                url: '/publisher/assets/process/apis/delete_Predecessor',
                type: 'POST',
                data: { 'deletePredecessorDetails': JSON.stringify(deletePredecessorObj) },
                success: function (response) {
                    alertify.success('Successfully deleted ' + deletePredecessorInput + ' from the predecessor list.');
                },
                error: function () {
                    alertify.error('Predecessor deleting error');
                }
            });
        }
    }

    function updateProcessOwner(element){
        var processOwner = $(element).parent().closest("tr").find("td:eq(1)").text();
        if(processOwner == ''){
            alertify.error('Process owner field is empty.');
        }else{
            var ownerDetails = {
                'processName': $('#view-header').text(),
                'processVersion' : $('#process-version').text(),
                'processOwner' : processOwner
            };

            $.ajax({
                url: '/publisher/assets/process/apis/update_owner',
                type: 'POST',
                data: { 'ownerDetails': JSON.stringify(ownerDetails) },
                success: function (response) {
                    $(element).hide();
                    alertify.success('Successfully updated the Process owner name.');
                },
                error: function () {
                    alertify.error('Process owner updating error');
                }
            });
        }
    }

    function isInputFieldEmpty(tableName){
        var isFieldEmpty = false;
        $('#table_' + tableName + ' tbody tr').each(function(){
            if($(this).find('td:eq(0) input').val() == ''){
                isFieldEmpty = true;
            }
        });
        return isFieldEmpty;
    }

    function addUnboundedRow(element){
        var tableName = $(element).attr('data-name');
        var table = $('#table_'+tableName);

        if(! isInputFieldEmpty(tableName)) {
            var referenceRow = $('#table_reference_' + tableName);
            var newRow = referenceRow.clone().removeAttr('id');
            $('input[type="text"]', newRow).val('');
            table.show().append(newRow);
        }else{
            alertify.error('Please fill the empty ' + tableName + ' field.');
        }
    }

</script>

<h2 id="view-header">process1</h2>
<br/>
<div id="overviewDiv">
            <table class="table table-responsive" style="width: 8cm;border-bottom:0px !important;">
                <tbody>
                <tr>
                    <td width="40%" style="border: 0px !important;">Version:</td>
                    <td width="60%" id="process-version" style="border: 0px !important;">1.0</td>
                </tr>
                <tr>
                    <td width="40%" style="border: 0px !important;">Owner:</td>
                    <td width="40%" style="border: 0px !important;" contenteditable="true" onblur="editProcessOwner(this)">sathya</td>
                    <td width="20%" style="border: 0px !important;"><span id="processOwnerUpdateBtn" class="glyphicon glyphicon-ok" data-toggle="tooltip" title="Click here to update the value" style="color:#0081c2;cursor: pointer;display: none;" onclick="updateProcessOwner(this)"></span></td>
                </tr>
                </tbody>
            </table>

            <div class="control-group" style="display: inline-block">

                    <div id="vtdiv"><button id="viewTextButton" class="btn btn-primary" onclick="viewText()">View/Edit Process Text</button></div>
                    <div id="atdiv"><button id="addTextButton" class="btn btn-primary" onclick="showTextEditor()" style="display: none">Describe process in text</button></div>

            </div>

            <div class="control-group" style="display: inline-block">

                    <button class="btn btn-primary" onclick="showBPMN()">Show BPMN</button>
                    <!--<a href="../../bpmn/details/469f4d33-92c4-4943-a57a-30b3139f79be">Show BPMN</a>-->

            </div>
            <br /><br />

    <form class="form-horizontal">
        <div class="control-group">

            <h2 class="field-title">
                <a class="collapsing-h2" aria-expanded="true" href="#subprocess" data-toggle="collapse" rel="tooltip" title="List of subprocesses for a given process">
                    <i class="cu-btn-exp-col btn-collapsed">Subprocess</i>
                </a>
            </h2>

            <div id="subprocess" class="responsive-form-container collapse in" aria-expanded="true" style="">
                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style="padding:0">
                    &nbsp;
                </div>
                <div style="border:0px solid #ff0000; padding:0" class="col-lg-10 col-md-10 col-sm-12 col-xs-12">
                    <div class="add-unbounded-row"><a data-name="subprocess" onclick="addUnboundedRow(this)"><i class="fa fa-plus-circle"></i> Add Subprocess</a></div>
                    <table class="tablex cu-data-table js-unbounded-table" id="table_subprocess">
                        <thead>

                        <tr><th></th>
                        </tr></thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
            </div>

            <h2 class="field-title">
                <a class="collapsing-h2" aria-expanded="true" href="#successor" data-toggle="collapse" rel="tooltip" title="List of successor processes for a given process">
                    <i class="cu-btn-exp-col btn-collapsed">Successor</i>
                </a>
            </h2>
            <div id="successor" class="responsive-form-container collapse in" aria-expanded="true" style="">
                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style="padding:0">
                    &nbsp;
                </div>
                <div style="border:0px solid #ff0000; padding:0" class="col-lg-10 col-md-10 col-sm-12 col-xs-12">
                    <div class="add-unbounded-row"><a data-name="successor" onclick="addUnboundedRow(this)"><i class="fa fa-plus-circle"></i> Add Successor</a></div>
                    <table class="tablex cu-data-table js-unbounded-table" id="table_successor">
                        <thead>

                        <tr><th></th>
                        </tr></thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
            </div>


            <h2 class="field-title">
                <a class="collapsing-h2" aria-expanded="true" href="#predecessor" data-toggle="collapse" rel="tooltip" title="List of predecessor processes for a given process">
                    <i class="cu-btn-exp-col btn-collapsed">Predecessor</i>
                </a>
            </h2>

            <div id="predecessor" class="responsive-form-container collapse in" aria-expanded="true" style="">
                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style="padding:0">
                    &nbsp;
                </div>
                <div style="border:0px solid #ff0000; padding:0" class="col-lg-10 col-md-10 col-sm-12 col-xs-12">
                    <div class="add-unbounded-row"><a data-name="predecessor" onclick="addUnboundedRow(this)"><i class="fa fa-plus-circle"></i> Add Predecessor</a></div>
                    <table class="tablex cu-data-table js-unbounded-table" id="table_predecessor">
                        <thead>

                        <tr><th></th>
                        </tr></thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </form>
</div>

<div id="processTextContainer" style="display: none">
    <div class="form-group">
        <button class="btn btn-primary" onclick="showOverview(this)"><span class="glyphicon glyphicon-circle-arrow-left"></span> Overview</button>
        <button class="btn btn-primary" onclick="editText()">Edit</button>
    </div>
    <div class = "panel panel-default">
        <div id="processTextDiv" class="panel-body">
            Place holder for rendering process text
        </div>
    </div>
</div>

<div id="processTextEditDiv" style="display: none">
    <div class="form-group">
        <button class="btn btn-primary" id="processTextOverviewBtn" onclick="showOverview(this)"><span class="glyphicon glyphicon-circle-arrow-left"></span> Overview</button>
        <button class="btn btn-primary" id="processTextSaveBtn" onclick="saveProcessText(this)">Save</button>
    </div>
    <input type="hidden" id="textProcessName" name="textProcessName" value="process1"/>
    <input type="hidden" id="textProcessVersion" name="textProcessVersion" value="1.0"/>
    <textarea placeholder="Enter Process Details" rows="15"
              id="processContent" name="processContentName"
              class="input-large"
              style="width:80em"></textarea>
</div>

<div id="bpmnViewDiv" style="display: none">
    <button class="btn btn-primary" onclick="showOverview(this)"><span class="glyphicon glyphicon-circle-arrow-left"></span> Overview</button><br /><br />
<div style="overflow:auto;width:1000px;height:500px;border:1px solid black;">
    <img id="bpmnImage" src="data:image/png;base64,"/>
</div>
</div>

<div id="bpmnEditDiv" style="display:none">
    <button class="btn btn-primary" onclick="showOverview(this)"><span class="glyphicon glyphicon-circle-arrow-left"></span> Overview</button>
    <form  method='post' action='../apis/upload_bpmn' enctype="multipart/form-data" class="form-horizontal" id="form-bar-create" data-redirect-url='/publisher/assets/process/list' >
        <br />
        <div style="float:left;width:15cm">
            <input type="file" class="filestyle" data-buttonName="btn-primary" data-placeholder="Enter archive" name="bpmn" id="bpmnFile" data-buttonText="BPMN file" accept=".xml,.bpmn">
        </div><br /><br />
        <input type="hidden" id="bpmnProcessName" name="bpmnProcessName" value="process1"/>
        <input type="hidden" id="bpmnProcessVersion" name="bpmnProcessVersion" value="1.0"/>

        <div id="saveButtons" class="form-actions">
            <input type='submit' id="btn-create-asset-bar" class="btn btn-primary"
                   name="addNewAssetButton" value='Upload file'>
            <button class="btn" type="reset">Reset</button>
            <input type="hidden" value="process" name="process"
                   id="meta-asset-type">
        </div>
    </form>
</div>

<table style="display: none;" class="refernceTableForUnbounded">
    <tbody>
    <tr id="table_reference_subprocess">
        <td valign="top" style="width: 90%;"><input type="text" class="form-control subprocess_Name" value="" name="subprocess_Name" id="subprocess_Name" onkeydown="subProcessNamesAutoComplete()"></td>
        <td style="width: 5%;"><span class="glyphicon glyphicon-ok" style="color:#0081c2;cursor: pointer;" onclick="readUpdatedSubprocess(this)"></span></td>
        <td style="width: 5%;"><a class="js-remove-row" onclick="deleteSubprocess(this)"><i class="fa fa-trash"></i></a> </td>
    </tr>
    </tbody>
</table>

<table style="display: none;" class="refernceTableForUnbounded">
    <tbody>
    <tr id="table_reference_successor">
        <td valign="top" style="width: 90%;"><input type="text" class="form-control successor_Name" value="" name="successor_Name" id="successor_Name" onkeydown="successorNameAutoComplete()"></td>
        <td style="width: 5%;"><span class="glyphicon glyphicon-ok" style="color:#0081c2;cursor: pointer;" onclick="readUpdatedSuccessor(this)"></span></td>
        <td style="width: 5%;"><a class="js-remove-row" onclick="deleteSuccessor(this)"><i class="fa fa-trash"></i></a> </td>
    </tr>
    </tbody>
</table>

<table style="display: none;" class="refernceTableForUnbounded">
    <tbody>
    <tr id="table_reference_predecessor">
        <td valign="top" style="width: 90%;"><input type="text" class="form-control predecessor_Name" value="" name="predecessor_Name" id="predecessor_Name" onkeydown="predecessorNameAutoComplete()"></td>
        <td style="width: 5%;"><span class="glyphicon glyphicon-ok" style="color:#0081c2;cursor: pointer;" onclick="readUpdatedPredecessor(this)"></span></td>
        <td style="width: 5%;"><a class="js-remove-row" onclick="deletePredecessor(this)"><i class="fa fa-trash"></i></a> </td>
    </tr>
    </tbody>
</table>






    </div>
</div>

<footer class="footer">
    <p>&copy; 2015 WSO2 Inc. All Rights Reserved</p>
</footer>

<script src="/publisher/themes/default/js/jquery-1.10.2.min.js"></script>
<script src="/publisher/themes/default/js/libs/jquery.form.min.js"></script>
<script src="/publisher/themes/default/js/bootstrap.min.js"></script>
<script src="/publisher/themes/default/js/async.min.js"></script>
<script src="/publisher/themes/default/js/publisher.commons.js"></script>
<script src="/publisher/themes/default/js/lc.processor.js"></script>
<script src="/publisher/themes/default/js/sugyama.js"></script>
<script src="/publisher/themes/default/js/raphael-min.js"></script>
<script src="/publisher/themes/default/js/graph.js"></script>
<script src="/publisher/themes/default/js/token.input/jquery.tokeninput.js"></script>
<script src="/publisher/themes/default/js/handlebars.js"></script>
<script src="/publisher/themes/default/js/notify.min.js"></script>
<script src="/publisher/themes/default/js/messages.js"></script>
<!-- Helper files js injector -->
<script>var caramel = caramel || {}; caramel.context = "/publisher"; caramel.themer = "default";caramel.url = function (path) { return this.context + (path.charAt(0) !== '/' ? '/' : '') + path; };var store = {"user" : "admin"}</script>
<script src="/publisher/themes/default/js/popover.js"></script>
<script src="/publisher/themes/default/js/delete-asset.js"></script>
<script src="/publisher/themes/default/js/select2.min.js"></script>
<script src="/publisher/themes/default/js/tags/tags-common.js"></script>
<script src="/publisher/themes/default/js/update_asset.js"></script>
<script src="/publisher/extensions/assets/process/themes/default/js/jquery-file-upload/jquery-ui.js"></script>
<script src="/publisher/extensions/assets/process/themes/default/js/jquery-file-upload/alertify.js"></script>
<script src="/publisher/extensions/assets/process/themes/default/js/jquery-file-upload/bootstrap-filestyle.js"></script>
<script src="/publisher/themes/default/js/tags/tags-init-view-asset.js"></script>
<script src="/publisher/extensions/assets/process/themes/default/js/tinymce/tinymce.min.js"></script>
<script src="/publisher/extensions/assets/process/themes/default/js/view-asset-functions.js"></script>
<!--
  ~ Copyright (c) WSO2 Inc. (http://wso2.com) All Rights Reserved.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<script type="text/javascript">
    if (!store.publisher) {
        store.publisher = {};
    }
    if(!store.publisher.lifecycle){
    	store.publisher.lifecycle ={};
    }
    store.publisher.lifecycle = {
        id: "ac3a9217-8a27-415b-9fd8-d3111a38bc63",
        currentState: "Unpublished",
        activeLifecycle: "SampleLifeCycle2",
        type: "process",
        deletableStates:"Unpublished"
    };
</script>


<script src="/publisher/themes/default/js/caramel.handlebars.client.js"></script>
<script src="/publisher/themes/default/js/caramel-client.js"></script>

<script type="text/javascript">

$( document ).ready(function() {
    $("[data-toggle=popover]").popover();

    $('.ribbon-container').affix({
        offset: {
            top: $('header').height()
        }
    });
});

</script>
</body>
</html>

